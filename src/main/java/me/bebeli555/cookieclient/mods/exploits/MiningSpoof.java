/*     */ package me.bebeli555.cookieclient.mods.exploits;
/*     */ 
/*     */ import me.bebeli555.cookieclient.Mod;
/*     */ import me.bebeli555.cookieclient.events.bus.EventHandler;
/*     */ import me.bebeli555.cookieclient.events.bus.Listener;
/*     */ import me.bebeli555.cookieclient.events.other.PacketEvent;
/*     */ import me.bebeli555.cookieclient.events.player.PlayerDamageBlockEvent;
/*     */ import me.bebeli555.cookieclient.events.player.PlayerMotionUpdateEvent;
/*     */ import me.bebeli555.cookieclient.gui.Group;
/*     */ import me.bebeli555.cookieclient.gui.Mode;
/*     */ import me.bebeli555.cookieclient.gui.Setting;
/*     */ import me.bebeli555.cookieclient.utils.InventoryUtil;
/*     */ import me.bebeli555.cookieclient.utils.RotationUtil;
/*     */ import net.minecraft.block.Block;
/*     */ import net.minecraft.init.Blocks;
/*     */ import net.minecraft.init.Items;
/*     */ import net.minecraft.item.Item;
/*     */ import net.minecraft.network.play.client.CPacketConfirmTeleport;
/*     */ import net.minecraft.network.play.client.CPacketPlayer;
/*     */ import net.minecraft.network.play.server.SPacketPlayerPosLook;
/*     */ import net.minecraft.util.EnumFacing;
/*     */ import net.minecraft.util.EnumHand;
/*     */ import net.minecraft.util.math.Vec3d;
/*     */ 
/*     */ public class MiningSpoof
/*     */   extends Mod {
/*     */   private static boolean noPick;
/*     */   @EventHandler
/*     */   private Listener<PlayerMotionUpdateEvent> onMotionUpdate;
/*  30 */   public static Setting ignoreAxe = new Setting(Mode.BOOLEAN, "IgnoreAxe", Boolean.valueOf(false), new String[] { "When holding axe it doesnt do it" });
/*  31 */   public static Setting ignoreSword = new Setting(Mode.BOOLEAN, "IgnoreSword", Boolean.valueOf(false), new String[] { "When holding sword it doesnt do it" }); @EventHandler
/*     */   private Listener<PlayerDamageBlockEvent> playerDamageBlockEvent;
/*     */   public MiningSpoof() {
/*  34 */     super(Group.EXPLOITS, "MiningSpoof", new String[] { "Allows you to mine blocks with your pickaxe", "Even when your not actually holding it", "Just start mining a block with this enabled", "And it will mine it as u would be using the pickaxe", "But you will not hold the pickaxe server/client side", "You need a pickaxe in ur hotbar for this to work" });
/*     */ 
/*     */ 
/*     */ 
/*     */ 
/*     */ 
/*     */ 
/*     */     
/*  42 */     this.onMotionUpdate = new Listener(event -> {
/*     */           
/*  44 */           if (mc.field_71439_g == null || !mc.field_71474_y.field_74312_F.func_151470_d() || mc.field_71476_x.func_178782_a() == null) {
/*     */             return;
/*     */           }
/*     */ 
/*     */           
/*  49 */           if (mc.field_71441_e.func_180495_p(mc.field_71476_x.func_178782_a()).func_185887_b(mc.field_71441_e, mc.field_71476_x.func_178782_a()) <= 0.0F) {
/*  50 */             noPick = true;
/*     */             
/*     */             return;
/*     */           } 
/*  54 */           if (!shouldMineSpoof()) {
/*     */             return;
/*     */           }
/*     */           
/*  58 */           int pickSlot = getPickaxeSlot();
/*  59 */           if (pickSlot == -1) {
/*  60 */             noPick = true; return;
/*     */           } 
/*  62 */           if (pickSlot == mc.field_71439_g.field_71071_by.field_70461_c) {
/*     */             return;
/*     */           }
/*     */           
/*  66 */           noPick = false;
/*  67 */           int oldSlot = mc.field_71439_g.field_71071_by.field_70461_c;
/*     */ 
/*     */           
/*  70 */           mc.field_71439_g.field_71071_by.field_70461_c = pickSlot;
/*  71 */           mc.field_71442_b.func_78765_e();
/*     */ 
/*     */           
/*  74 */           mc.field_71439_g.func_184609_a(EnumHand.MAIN_HAND);
/*  75 */           mc.field_71442_b.func_180512_c(mc.field_71476_x.func_178782_a(), mc.field_71476_x.field_178784_b);
/*     */ 
/*     */           
/*  78 */           mc.field_71439_g.field_71071_by.field_70461_c = oldSlot;
/*  79 */           mc.field_71442_b.func_78765_e();
/*     */         }new java.util.function.Predicate[0]);
/*     */     
/*  82 */     this.playerDamageBlockEvent = new Listener(event -> {
/*     */           
/*  84 */           if (mc.field_71439_g.field_71071_by.field_70461_c != getPickaxeSlot() && !noPick && shouldMineSpoof())
/*  85 */             event.cancel(); 
/*     */         }new java.util.function.Predicate[0]);
/*     */   }
/*     */   public void onDisabled() { noPick = false; }
/*     */   
/*     */   public static boolean shouldMineSpoof() {
/*  91 */     held = mc.field_71439_g.func_184614_ca().func_77973_b();
/*  92 */     if ((ignoreAxe.booleanValue() && held instanceof net.minecraft.item.ItemAxe) || (ignoreSword.booleanValue() && held instanceof net.minecraft.item.ItemSword)) {
/*  93 */       return false;
/*     */     }
/*     */ 
/*     */     
/*  97 */     Block[] dontMine = { Blocks.field_150321_G };
/*  98 */     for (Block block : dontMine) {
/*  99 */       if (getBlock(mc.field_71476_x.func_178782_a()) == block) {
/* 100 */         return false;
/*     */       }
/*     */     } 
/*     */     
/* 104 */     return true;
/*     */   }
/*     */   
/*     */   public static int getPickaxeSlot() {
/* 108 */     picks = new Item[] { Items.field_151046_w, Items.field_151005_D, Items.field_151035_b, Items.field_151050_s, Items.field_151039_o };
/*     */     
/* 110 */     for (Item pick : picks) {
/* 111 */       if (InventoryUtil.hasHotbarItem(pick)) {
/* 112 */         return InventoryUtil.getSlot(pick);
/*     */       }
/*     */     } 
/*     */     
/* 116 */     return -1;
/*     */   }
/*     */ 
/*     */   
/*     */   public static class CancelForceRotation
/*     */   {
/* 122 */     public CancelForceRotation() { this.packetEvent = new Listener(event -> {
/*     */             
/* 124 */             if (Mod.mc.field_71439_g == null) {
/*     */               return;
/*     */             }
/*     */             
/* 128 */             if (event.packet instanceof SPacketPlayerPosLook) {
/* 129 */               event.cancel();
/*     */               
/* 131 */               SPacketPlayerPosLook packet = (SPacketPlayerPosLook)event.packet;
/* 132 */               Mod.mc.field_71439_g.func_70107_b(packet.func_148932_c(), packet.func_148928_d(), packet.func_148933_e());
/* 133 */               Mod.mc.field_71439_g.field_70181_x = 0.0D;
/*     */               
/* 135 */               float[] rotations = RotationUtil.getRotations((new Vec3d(Mod.getPlayerPos().func_177982_a(0, -1, 0))).func_72441_c(0.5D, 0.5D, 0.5D).func_178787_e((new Vec3d(EnumFacing.UP.func_176730_m())).func_186678_a(0.5D)));
/*     */               
/* 137 */               Mod.mc.func_147114_u().func_147297_a(new CPacketConfirmTeleport(packet.func_186965_f()));
/* 138 */               Mod.mc.func_147114_u().func_147297_a(new CPacketPlayer.PositionRotation(Mod.mc.field_71439_g.field_70165_t, (Mod.mc.field_71439_g.func_174813_aQ()).field_72338_b, Mod.mc.field_71439_g.field_70161_v, rotations[0], rotations[1], false));
/*     */             } 
/*     */           }new java.util.function.Predicate[0]); }
/*     */     
/*     */     public static CancelForceRotation instance = new CancelForceRotation();
/*     */     @EventHandler
/*     */     private Listener<PacketEvent> packetEvent;
/*     */   }
/*     */ }


/* Location:              C:\Users\deadc\Downloads\nhack-1.0.2-dev-release.jar!\me\bebeli555\cookieclient\mods\exploits\MiningSpoof.class
 * Java compiler version: 8 (52.0)
 * JD-Core Version:       1.0.0
 */