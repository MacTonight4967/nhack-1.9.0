/*    */ package me.bebeli555.cookieclient.mods.exploits;
/*    */ 
/*    */ import me.bebeli555.cookieclient.Mod;
/*    */ import me.bebeli555.cookieclient.events.bus.EventHandler;
/*    */ import me.bebeli555.cookieclient.events.bus.Listener;
/*    */ import me.bebeli555.cookieclient.events.other.PacketEvent;
/*    */ import me.bebeli555.cookieclient.events.player.PlayerMotionUpdateEvent;
/*    */ import me.bebeli555.cookieclient.gui.Group;
/*    */ import me.bebeli555.cookieclient.gui.Mode;
/*    */ import me.bebeli555.cookieclient.gui.Setting;
/*    */ import me.bebeli555.cookieclient.mods.movement.EntitySpeed;
/*    */ import me.bebeli555.cookieclient.mods.render.Freecam;
/*    */ import me.bebeli555.cookieclient.utils.Timer;
/*    */ import net.minecraft.network.play.client.CPacketConfirmTeleport;
/*    */ import net.minecraft.network.play.client.CPacketPlayer;
/*    */ import net.minecraft.network.play.server.SPacketPlayerPosLook;
/*    */ import net.minecraft.util.math.Vec3d;
/*    */ 
/*    */ public class PacketFly extends Mod {
/* 20 */   private static Timer antikickTimer = new Timer();
/*    */   
/* 22 */   public static Setting speed = new Setting(Mode.DOUBLE, "Speed", Double.valueOf(0.031D), new String[] { "Higher = faster" });
/* 23 */   public static Setting downSpeed = new Setting(Mode.DOUBLE, "DownSpeed", Double.valueOf(0.1D), new String[] { "How much to go down every now and then", "To prevent getting kicked" });
/* 24 */   public static Setting antikickMs = new Setting(Mode.INTEGER, "AntiKickMs", Integer.valueOf(1000), new String[] { "AntiKick timer in milliseconds", "How often it makes it go down a bit" });
/* 25 */   public static Setting teleportAmount = new Setting(Mode.INTEGER, "Teleport", Integer.valueOf(1337), new String[] { "How much to teleport up", "To make it work" });
/*    */   
/*    */   public PacketFly() {
/* 28 */     super(Group.EXPLOITS, "PacketFly", new String[] { "Fly using packet exploit" });
/*    */ 
/*    */     
/* 31 */     this.playerMotionUpdateEvent = new Listener(event -> {
/*    */           
/* 33 */           mc.field_71439_g.func_70016_h(0.0D, 0.0D, 0.0D);
/* 34 */           event.cancel();
/*    */           
/* 36 */           if (mc.field_71439_g.field_70173_aa < 20) {
/*    */             return;
/*    */           }
/*    */           
/* 40 */           if (!antikickTimer.hasPassed(antikickMs.intValue())) {
/* 41 */             if (mc.field_71474_y.field_74314_A.func_151470_d()) {
/* 42 */               mc.field_71439_g.field_70181_x = speed.doubleValue();
/* 43 */             } else if (mc.field_71474_y.field_74311_E.func_151470_d()) {
/* 44 */               mc.field_71439_g.field_70181_x = -speed.doubleValue();
/*    */             } 
/*    */           } else {
/* 47 */             antikickTimer.reset();
/* 48 */             if (!isSolid(getPlayerPos())) {
/* 49 */               mc.field_71439_g.field_70181_x = -downSpeed.doubleValue();
/*    */             }
/*    */           } 
/*    */           
/* 53 */           if (EntitySpeed.isInputting()) {
/* 54 */             double yawRad = Math.toRadians(mc.field_71439_g.field_70177_z - Freecam.getRotationFromVec(new Vec3d(-mc.field_71439_g.field_70702_br, 0.0D, mc.field_71439_g.field_191988_bg))[0]);
/* 55 */             mc.field_71439_g.field_70159_w = -Math.sin(yawRad) * speed.doubleValue();
/* 56 */             mc.field_71439_g.field_70179_y = Math.cos(yawRad) * speed.doubleValue();
/*    */           } 
/*    */           
/* 59 */           mc.field_71439_g.field_71174_a.func_147297_a(new CPacketPlayer.PositionRotation(mc.field_71439_g.field_70165_t + mc.field_71439_g.field_70159_w, mc.field_71439_g.field_70163_u + mc.field_71439_g.field_70181_x, mc.field_71439_g.field_70161_v + mc.field_71439_g.field_70179_y, mc.field_71439_g.field_70177_z, mc.field_71439_g.field_70125_A, mc.field_71439_g.field_70122_E));
/*    */           
/* 61 */           double y = mc.field_71439_g.field_70163_u + mc.field_71439_g.field_70181_x;
/* 62 */           y += teleportAmount.intValue();
/* 63 */           mc.field_71439_g.field_71174_a.func_147297_a(new CPacketPlayer.PositionRotation(mc.field_71439_g.field_70165_t + mc.field_71439_g.field_70159_w, y, mc.field_71439_g.field_70161_v + mc.field_71439_g.field_70179_y, mc.field_71439_g.field_70177_z, mc.field_71439_g.field_70125_A, mc.field_71439_g.field_70122_E));
/*    */         }new java.util.function.Predicate[0]);
/*    */     
/* 66 */     this.onPacket = new Listener(event -> {
/*    */           
/* 68 */           if (event.packet instanceof SPacketPlayerPosLook && mc.field_71462_r == null) {
/* 69 */             SPacketPlayerPosLook packet = (SPacketPlayerPosLook)event.packet;
/* 70 */             mc.field_71439_g.field_71174_a.func_147297_a(new CPacketConfirmTeleport(packet.func_186965_f()));
/* 71 */             mc.field_71439_g.field_71174_a.func_147297_a(new CPacketPlayer.PositionRotation(packet.func_148932_c(), packet.func_148928_d(), packet.func_148933_e(), packet.func_148931_f(), packet.func_148930_g(), false));
/* 72 */             mc.field_71439_g.func_70107_b(packet.func_148932_c(), packet.func_148928_d(), packet.func_148933_e());
/*    */             
/* 74 */             event.cancel();
/*    */           } 
/*    */         }new java.util.function.Predicate[0]);
/*    */   }
/*    */   
/*    */   @EventHandler
/*    */   public Listener<PlayerMotionUpdateEvent> playerMotionUpdateEvent;
/*    */   @EventHandler
/*    */   public Listener<PacketEvent> onPacket;
/*    */ }


/* Location:              C:\Users\deadc\Downloads\nhack-1.0.2-dev-release.jar!\me\bebeli555\cookieclient\mods\exploits\PacketFly.class
 * Java compiler version: 8 (52.0)
 * JD-Core Version:       1.0.0
 */